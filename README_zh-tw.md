## 『Python 工匠』是什麼？

我一直覺得程式設計某種意義上是一門『手藝』，因為優雅而高效的程式碼，就如同完美的手工藝品一樣讓人賞心悅目。

在雕琢程式碼的過程中，有大工程：比如應該用什麼架構、哪種設計模式。也有更多的小細節，比如何時使用異常（Exceptions）、或怎麼給變數起名。那些真正優秀的程式碼，正是由無數優秀的細節造就的。

『Python 工匠』這個系列文章，是我的一次小小嚐試。它專注於分享 Python 程式設計中的一些偏 **『小』** 的東西。希望能夠幫到每一位程式設計路上的匠人。


## 文章列表
 
- [1. 善用變數改善程式碼質量](zh_CN/1-using-variables-well.md)
- [2. 編寫條件分支程式碼的技巧](zh_CN/2-if-else-block-secrets.md)
- [3. 使用數字與字串的技巧](zh_CN/3-tips-on-numbers-and-strings.md)
- [4. 容器的門道](zh_CN/4-mastering-container-types.md)
- [5. 讓函式返回結果的技巧](zh_CN/5-function-returning-tips.md)
- [6. 異常處理的三個好習慣](zh_CN/6-three-rituals-of-exceptions-handling.md)
- [7. 編寫地道迴圈的兩個建議](zh_CN/7-two-tips-on-loop-writing.md)
- [8. 使用裝飾器的技巧](zh_CN/8-tips-on-decorators.md)
- [9. 一個關於模組的小故事](zh_CN/9-a-story-on-cyclic-imports.md)
- [10. 做一個精通規則的玩家](zh_CN/10-a-good-player-know-the-rules.md)
- [11. 高效操作檔案的三個建議](zh_CN/11-three-tips-on-writing-file-related-codes.md)
- [12. 寫好面向物件程式碼的原則（上）](zh_CN/12-write-solid-python-codes-part-1.md)
- [13. 寫好面向物件程式碼的原則（中）](zh_CN/13-write-solid-python-codes-part-2.md)
- [14. 寫好面向物件程式碼的原則（下）](zh_CN/14-write-solid-python-codes-part-3.md)
- [15. 在邊界處思考](zh_CN/15-thinking-in-edge-cases.md)

關注我的微信公眾號，在第一時間閱讀最新文章：

<img src="https://user-images.githubusercontent.com/731266/54093209-2edced80-43d0-11e9-8e69-764f5da8b275.png" />

所有文章禁止轉載，如需轉載請透過微信公眾號聯絡我。

## 詳細內容

### 1. [善用變數改善程式碼質量](zh_CN/1-using-variables-well.md)

* 如何為變數起名
    * 1 - 變數名要有描述性，不能太寬泛
    * 2 - 變數名最好讓人能猜出型別
        * 『什麼樣的名字會被當成 bool 型別？』
        * 『什麼樣的名字會被當成 int/float 型別？』
        * 其他型別
    * 3 - 適當使用『匈牙利命名法』
    * 4 - 變數名儘量短，但是絕對不要太短
        * 使用短名字的例外情況
    * 5 - 其他注意事項
* 更好的使用變數
    * 1 - 保持一致性
    * 2 - 儘量不要用 globals()/locals()
    * 3 - 變數定義儘量靠近使用
    * 4 - 合理使用 namedtuple/dict 來讓函式返回多個值
    * 5 - 控制單個函式內的變數數量
    * 6 - 及時刪掉那些沒用的變數
    * 7 - 能不定義變數就不定義
* 結語

### 2. [編寫條件分支程式碼的技巧](zh_CN/2-if-else-block-secrets.md)

* 最佳實踐
    * 1 - 避免多層分支巢狀
    * 2 - 封裝那些過於複雜的邏輯判斷
    * 3 - 留意不同分支下的重複程式碼
    * 4 - 謹慎使用三元表示式
* 常見技巧
    * 1 - 使用“德摩根定律”
    * 2 - 自定義物件的“布林真假”
    * 3 - 在條件判斷中使用 all() / any()
    * 4 - 使用 try/while/for 中 else 分支
* 常見陷阱
    * 1 - 與 None 值的比較
    * 2 - 留意 and 和 or 的運算優先順序
* 結語
* 註解

### 3. [使用數字與字串的技巧](zh_CN/3-tips-on-numbers-and-strings.md)

* 最佳實踐
    * 1 - 少寫數字字面量
        * 使用 enum 列舉型別改善程式碼
    * 2 - 別在裸字串處理上走太遠
    * 3 - 不必預計算字面量表達式
* 實用技巧
    * 1 - 布林值其實也是“數字”
    * 2 - 改善超長字串的可讀性
        * 當多級縮排裡出現多行字串時
    * 3 - 別忘了那些 “r” 開頭的內建字串函式
    * 4 - 使用“無窮大” float("inf")
* 常見誤區
    * 1 - “value += 1” 並非執行緒安全
    * 2 - 字串拼接並不慢
* 結語

### 4. [容器的門道](zh_CN/4-mastering-container-types.md)

* 底層看容器
    * 寫更快的程式碼
        * 1 - 避免頻繁擴充列表/建立新列表
        * 2 - 在列表頭部操作多的場景使用 deque 模組
        * 3 - 使用集合/字典來判斷成員是否存在
* 高層看容器
    * 寫擴充套件性更好的程式碼
        * 面向容器介面程式設計
* 常用技巧
    * 1 - 使用元組改善分支程式碼
    * 2 - 在更多地方使用動態解包
    * 3 - 使用 next() 函式
    * 4 - 使用有序字典來去重
* 常見誤區
    * 1 - 當心那些已經枯竭的迭代器
    * 2 - 別在迴圈體內修改被迭代物件
* 總結
* 系列其他文章
* 註解

### 5. [讓函式返回結果的技巧](zh_CN/5-function-returning-tips.md)

* 程式設計建議
   * 1 - 單個函式不要返回多種型別
   * 2 - 使用 partial 構造新函式
   * 3 - 丟擲異常，而不是返回結果與錯誤
   * 4 - 謹慎使用 None 返回值
      * 1 - 作為操作類函式的預設返回值
      * 2 - 作為某些“意料之中”的可能沒有的值
      * 3 - 作為呼叫失敗時代表“錯誤結果”的值
   * 5 - 合理使用“空物件模式”
   * 6 - 使用生成器函式代替返回列表
   * 7 - 限制遞迴的使用
* 總結
* 附錄

### 6. [異常處理的三個好習慣](zh_CN/6-three-rituals-of-exceptions-handling.md)

* 前言
* 三個好習慣
   * 1 - 只做最精確的異常捕獲
   * 2 - 別讓異常破壞抽象一致性
   * 3 - 異常處理不應該喧賓奪主
* 總結
* 附錄

### 7. [編寫地道迴圈的兩個建議](zh_CN/7-two-tips-on-loop-writing.md)

* 前言
* 什麼是“地道”的迴圈？
   * enumerate() 所代表的程式設計思路
* 建議1：使用函式修飾被迭代物件來最佳化迴圈
   * 1 - 使用 product 扁平化多層巢狀迴圈
   * 2 - 使用 islice 實現迴圈內隔行處理
   * 3 - 使用 takewhile 替代 break 語句
   * 4 - 使用生成器編寫自己的修飾函式
* 建議2：按職責拆解迴圈體內複雜程式碼塊
   * 複雜迴圈體如何應對新需求
   * 使用生成器函式解耦迴圈體
* 總結
* 附錄

### 8. [使用裝飾器的技巧](zh_CN/8-tips-on-decorators.md)

* 前言
* 最佳實踐
   * 1 - 嘗試用類來實現裝飾器
   * 2 - 使用 wrapt 模組編寫更扁平的裝飾器
* 常見錯誤
   * 1 - “裝飾器”並不是“裝飾器模式”
   * 2 - 記得用 functools.wraps() 裝飾內層函式
   * 3 - 修改外層變數時記得使用 nonlocal
* 總結
* 附錄

### 9. [一個關於模組的小故事](zh_CN/9-a-story-on-cyclic-imports.md)

* 前言
* 一個關於模組的小故事
   * 需求變更
   * 解決環形依賴問題
   * 小 C 的疑問
* 總結
* 附錄

### 10. [做一個精通規則的玩家](zh_CN/10-a-good-player-know-the-rules.md)

* 前言
   * Python 裡的規則
* 案例：從兩份旅遊資料中獲取人員名單
   * 第一次蠻力嘗試
   * 嘗試使用集合最佳化函式
   * 對問題的重新思考
   * 利用集合的遊戲規則
   * 使用 dataclass 簡化程式碼
   * 案例總結
* 其他規則如何影響我們
   * 使用 `__format__` 做物件字串格式化
   * 使用 `__getitem__` 定義物件切片操作
* 總結
* 附錄

### 11. [高效操作檔案的三個建議](zh_CN/11-three-tips-on-writing-file-related-codes.md)

* 前言
* 建議一：使用 pathlib 模組
   * 使用 pathlib 模組改寫程式碼
   * 其他用法
* 建議二：掌握如何流式讀取大檔案
   * 標準做法的缺點
   * 使用 read 方法分塊讀取
   * 利用生成器解耦程式碼
* 建議三：設計接受檔案物件的函式
   * 如何編寫相容二者的函式
* 總結
* 附錄
* 註解

### 12. [寫好面向物件程式碼的原則（上）](zh_CN/12-write-solid-python-codes-part-1.md)

* 前言
   * Python 對 OOP 的支援
   * SOLID 設計原則
* SOLID 原則與 Python
* S：單一職責原則
   * 違反“單一職責原則”的壞處
   * 拆分大類為多個小類
   * 另一種方案：使用函式
* O：開放-關閉原則
   * 如何違反“開放-關閉原則”
   * 使用類繼承來改造程式碼
   * 使用組合與依賴注入來改造程式碼
   * 使用資料驅動思想來改造程式碼
* 總結
* 附錄

### 13. [寫好面向物件程式碼的原則（中）](zh_CN/13-write-solid-python-codes-part-2.md)

* 前言
* 里氏替換原則與繼承
* L：里氏替換原則
* 一個違反 L 原則的樣例
   * 不當繼承關係如何違反 L 原則
   * 一個簡單但錯誤的解決辦法
   * 正確的修改辦法
* 另一種違反方式：子類修改方法返回值法返回值)
   * 分析類方法返回結果
   * 如何修改程式碼
   * 方法引數與 L 原則
* 總結
* 附錄

### 14. [寫好面向物件程式碼的原則（下）](zh_CN/14-write-solid-python-codes-part-3.md)

* 前言
* D：依賴倒置原則
   * 需求：按域名分組統計 HN 新聞數量
   * 為 SiteSourceGrouper 編寫單元測試
      * 使用 mock 模組
   * 實現依賴倒置原則
   * 依賴倒置後的單元測試
   * 問題：一定要使用抽象類 abc 嗎？
   * 問題：抽象一定是好東西嗎？
* I：介面隔離原則
   * 例子：開發頁面歸檔功能
   * 問題：實體類不符合 HNWebPage 介面規範
   * 成功違反 I 協議
   * 如何分拆介面
   * 一些不容易發現的違反情況
   * 現實世界中的介面隔離
* 總結
* 附錄

### 15. [在邊界處思考](zh_CN/15-thinking-in-edge-cases.md)

* 前言
* 第一課：使用分支還是異常？
    * 獲取原諒比許可簡單(EAFP)
* 當容器內容不存在時
    * 使用 defaultdict 改寫示例
    * 使用 setdefault 取值並修改
    * 使用 dict.pop 刪除不存在的鍵
    * 當列表切片越界時
* 好用又危險的 “or” 運算子
* 不要手動去做資料校驗
* 不要忘記做數學計算
* 總結
* 附錄


